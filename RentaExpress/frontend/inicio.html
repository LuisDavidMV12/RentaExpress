<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentaExpress - Alquiler de Vehículos</title>
    <style>

:root {
    --primary-color: #2c3e50;
    --secondary-color: #3498db;
    --accent-color: #e74c3c;
    --success-color: #27ae60;
    --warning-color: #f39c12;
    --light-gray: #ecf0f1;
    --dark-gray: #7f8c8d;
    --white: #ffffff;
    --border-radius: 8px;
    --shadow: 0 2px 10px rgba(0,0,0,0.1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: var(--primary-color);
    background-color: var(--light-gray);
}

/* Header */
.header {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: var(--white);
    padding: 1rem 0;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: var(--shadow);
}

.nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
}

.logo {
    font-size: 2rem;
    font-weight: bold;
}

.nav-links {
    display: flex;
    gap: 2rem;
    list-style: none;
}

.nav-links a {
    color: var(--white);
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: var(--border-radius);
    transition: background 0.3s;
}

.nav-links a:hover {
    background: rgba(255,255,255,0.2);
}

/* Main Content */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

/* Cards */
.card {
    background: var(--white);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    padding: 2rem;
    margin-bottom: 2rem;
}

/* Forms */
.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--primary-color);
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #ddd;
    border-radius: var(--border-radius);
    font-size: 1rem;
    transition: border-color 0.3s;
}

.form-control:focus {
    outline: none;
    border-color: var(--secondary-color);
}

.form-control.error {
    border-color: var(--accent-color);
}

/* Buttons */
.btn {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s;
    text-align: center;
}

.btn-primary {
    background: var(--secondary-color);
    color: var(--white);
}

.btn-primary:hover {
    background: #2980b9;
    transform: translateY(-2px);
}

.btn-success {
    background: var(--success-color);
    color: var(--white);
}

.btn-danger {
    background: var(--accent-color);
    color: var(--white);
}

.btn-outline {
    background: transparent;
    border: 2px solid var(--secondary-color);
    color: var(--secondary-color);
}

.btn-outline:hover {
    background: var(--secondary-color);
    color: var(--white);
}

/* Vehicle Grid */
.vehicles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.vehicle-card {
    background: var(--white);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    transition: transform 0.3s;
}

.vehicle-card:hover {
    transform: translateY(-5px);
}

.vehicle-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    background: var(--light-gray);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--dark-gray);
}

.vehicle-info {
    padding: 1.5rem;
}

.vehicle-title {
    font-size: 1.25rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.vehicle-price {
    font-size: 1.5rem;
    color: var(--secondary-color);
    font-weight: bold;
    margin-bottom: 1rem;
}

.vehicle-details {
    color: var(--dark-gray);
    margin-bottom: 1rem;
}

/* Alerts */
.alert {
    padding: 1rem;
    border-radius: var(--border-radius);
    margin-bottom: 1rem;
}

.alert-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.alert-info {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

/* Tables */
.table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}

.table th,
.table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

.table th {
    background: var(--light-gray);
    font-weight: 600;
}

/* Loading */
.loading {
    display: none;
    text-align: center;
    padding: 2rem;
}

.spinner {
    border: 3px solid var(--light-gray);
    border-top: 3px solid var(--secondary-color);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Responsive */
@media (max-width: 768px) {
    .nav {
        flex-direction: column;
        gap: 1rem;
    }
    
    .nav-links {
        gap: 1rem;
    }
    
    .container {
        padding: 1rem;
    }
    
    .vehicles-grid {
        grid-template-columns: 1fr;
    }
}

/* Hide/Show elements */
.hidden {
    display: none !important;
}

.text-center {
    text-align: center;
}

.mb-2 { margin-bottom: 1rem; }
.mt-2 { margin-top: 1rem; }
.p-2 { padding: 1rem; }

/* Status badges */
.status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
}

.status-confirmada { background: #d4edda; color: #155724; }
.status-completada { background: #cce5ff; color: #004085; }
.status-cancelada { background: #f8d7da; color: #721c24; }

/* Hero section */
.hero {
    background: linear-gradient(rgba(44,62,80,0.8), rgba(52,152,219,0.8)), 
                url('images/imagenFondo.jpg');
    background-size: cover;
    background-position: center;
    color: var(--white);
    padding: 4rem 0;
    text-align: center;
}

.hero h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.hero p {
    font-size: 1.25rem;
    margin-bottom: 2rem;
}
    </style>
</head>
<body>

<header class="header">
    <nav class="nav">
        <div class="logo">RentaExpress</div>
        <ul class="nav-links">
            <li><a href="inicio.html">Inicio</a></li>
            <li id="nav-login"><a href="index.html">Iniciar Sesión</a></li>
            <li id="nav-register"><a href="register.html">Registrarse</a></li>
            <li id="nav-user" class="hidden"><a href="user.html">Mi Cuenta</a></li>
            <li id="nav-admin" class="hidden"><a href="admin.html">Admin</a></li>
            <li id="nav-logout" class="hidden"><a href="#" onclick="logout()">Cerrar Sesión</a></li>
        </ul>
    </nav>
</header>

<main>
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Alquila el Auto Perfecto</h1>
            <p>Los mejores vehículos al mejor precio para tus aventuras</p>
            <div id="user-greeting" class="hidden">
                <h2>Bienvenido, <span id="user-name"></span>!</h2>
            </div>
        </div>
    </section>

    <!-- Filtros de Búsqueda -->
    <section class="container">
        <div class="card">
            <h2>Buscar Vehículos</h2>
            <form id="search-form">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div class="form-group">
                        <label for="brand">Marca</label>
                        <input type="text" id="brand" class="form-control" placeholder="Toyota, Honda, etc.">
                    </div>
                    <div class="form-group">
                        <label for="model">Modelo</label>
                        <input type="text" id="model" class="form-control" placeholder="Corolla, Civic, etc.">
                    </div>
                    <div class="form-group">
                        <label for="year">Año</label>
                        <select id="year" class="form-control">
                            <option value="">Todos los años</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                            <option value="2021">2021</option>
                            <option value="2020">2020</option>
                            <option value="2020">2019</option>
                            <option value="2020">2018</option>
                            <option value="2020">2017</option>
                            <option value="2020">2016</option>
                            <option value="2020">2015</option>
                            <option value="2020">2014</option>
                            <option value="2020">2013</option>
                            <option value="2020">2012</option>
                            <option value="2020">2011</option>
                            <option value="2020">2010</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="max_price">Precio máximo por día</label>
                        <input type="number" id="max_price" class="form-control" placeholder="100">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Buscar</button>
                <button type="button" class="btn btn-outline" onclick="clearFilters()">Limpiar</button>
            </form>
        </div>
    </section>

    <!-- Lista de Vehículos -->
    <section class="container">
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Cargando vehículos...</p>
        </div>

        <div id="vehicles-container">
            <h2>Vehículos Disponibles</h2>
            <div class="vehicles-grid" id="vehicles-grid">
                <!-- Los vehículos se cargan dinámicamente aquí -->
            </div>
        </div>

        <div id="no-results" class="hidden text-center">
            <h3>No se encontraron vehículos</h3>
            <p>Intenta con otros filtros de búsqueda</p>
        </div>
    </section>
</main>

<!-- Modal para Rentar Vehículo -->
<div id="rental-modal" class="modal hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
    <div class="modal-content" style="background: white; padding: 2rem; border-radius: 8px; max-width: 500px; width: 90%;">
        <h3>Rentar Vehículo</h3>
        <div id="selected-vehicle-info"></div>
        <form id="rental-form">
            <input type="hidden" id="rental-vehicle-id">
            <div class="form-group">
                <label for="start-date">Fecha de inicio</label>
                <input type="date" id="start-date" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="end-date">Fecha de fin</label>
                <input type="date" id="end-date" class="form-control" required>
            </div>
            <div class="form-group">
                <div id="price-calculation"></div>
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button type="button" class="btn btn-outline" onclick="closeRentalModal()">Cancelar</button>
                <button type="submit" class="btn btn-primary">Confirmar Renta</button>
            </div>
        </form>
    </div>
</div>

<script>
// Variables globales
let vehicles = [];
let currentUser = null;
const API_BASE = 'http://localhost:8000/api';

// Datos de prueba
const demoVehicles = [
    {
        id: 1, image:'<img src="images/corolla.webp" alt="${brand}+{model}" width="200">', brand: 'Toyota', model: 'Corolla', year: 2022,
        price_per_day: 45.00, available: true,
        description: 'Sedán económico, perfecto para ciudad'
    },
    {
        id: 2, image:'<img src="images/civic.webp" alt="${brand}+{model}" width="200">', brand: 'Honda', model: 'Civic', year: 2023,
        price_per_day: 50.00, available: true,
        description: 'Sedán moderno con excelente rendimiento'
    },
    {
        id: 3, image:'<img src="images/HyundaiElantra.jpeg" alt="${brand}+{model}" width="200">',brand: 'Hyundai', model: 'Elantra', year: 2021,
        price_per_day: 42.00, available: true,
        description: 'Cómodo y confiable para viajes largos'
    },
    {
        id: 4, image:'<img src="images/NissanRAV4.jpg" alt="${brand}+{model}" width="200">',brand: 'Nissan', model: 'Sentra', year: 2022,
        price_per_day: 48.00, available: false,
        description: 'Sedán elegante con tecnología avanzada'
    }
];

// Función principal de carga
async function loadVehicles() {
    console.log('Cargando vehículos...');
    const loading = document.getElementById('loading');
    if (loading) loading.style.display = 'block';
    
    try {
        // Usar datos de prueba
        vehicles = [...demoVehicles];
        displayVehicles(vehicles);
        console.log('Vehículos cargados:', vehicles.length);
    } catch (error) {
        console.error('Error:', error);
    } finally {
        if (loading) loading.style.display = 'none';
    }
}

// Mostrar vehículos
function displayVehicles(vehicleList) {
    const grid = document.getElementById('vehicles-grid');
    const noResults = document.getElementById('no-results');
    
    if (!grid) {
        console.error('No se encontró vehicles-grid');
        return;
    }
    
    if (vehicleList.length === 0) {
        grid.innerHTML = '';
        if (noResults) noResults.classList.remove('hidden');
        return;
    }
    
    if (noResults) noResults.classList.add('hidden');
    
    grid.innerHTML = vehicleList.map(vehicle => `
        <div class="vehicle-card">
            <div class="vehicle-image"> ${vehicle.image}</div>
            <div class="vehicle-info">
                <h3 class="vehicle-title">${vehicle.brand} ${vehicle.model}</h3>
                <div class="vehicle-price">$${vehicle.price_per_day}/día</div>
                <div class="vehicle-details">
                    <p><strong>Año:</strong> ${vehicle.year}</p>
                    <p><strong>Disponible:</strong> ${vehicle.available ? 'Sí' : 'No'}</p>
                    <p><strong>Descripción:</strong> ${vehicle.description}</p>
                </div>
                <button class="btn ${vehicle.available ? 'btn-primary' : 'btn-danger'}" 
                        ${!vehicle.available ? 'disabled' : ''}>
                    ${vehicle.available ? 'Rentar Ahora' : 'No Disponible'}
                </button>
            </div>
        </div>
    `).join('');
    
    console.log('Vehículos mostrados en el DOM');
}

// Inicializar cuando el DOM esté listo
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM listo, cargando vehículos...');
    loadVehicles();
});

// También cargar si ya está listo
if (document.readyState !== 'loading') {
    loadVehicles();
}
</script>
